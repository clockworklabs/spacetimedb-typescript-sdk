// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN RUST INSTEAD.

// @ts-ignore
import {
  __SPACETIMEDB__,
  AlgebraicType,
  ProductType,
  BuiltinType,
  ProductTypeElement,
  SumType,
  SumTypeVariant,
  DatabaseTable,
  AlgebraicValue,
  ReducerEvent,
  Identity,
  Address,
  ClientDB,
  SpacetimeDBClient,
} from "../index";
// @ts-ignore
import { OneOffTable } from "./one_off_table";

export class OneOffQueryResponse {
  public static tableName = "OneOffQueryResponse";
  public messageId: Uint8Array;
  public error: string | null;
  public tables: OneOffTable[];
  public totalHostExecutionDurationMicros: BigInt;

  public static primaryKey: string | undefined = undefined;

  constructor(
    messageId: Uint8Array,
    error: string | null,
    tables: OneOffTable[],
    totalHostExecutionDurationMicros: BigInt
  ) {
    this.messageId = messageId;
    this.error = error;
    this.tables = tables;
    this.totalHostExecutionDurationMicros = totalHostExecutionDurationMicros;
  }

  public static serialize(value: OneOffQueryResponse): object {
    return [
      Array.from(value.messageId),
      value.error ? { some: value.error } : { none: [] },
      value.tables.map((el) => OneOffTable.serialize(el)),
      value.totalHostExecutionDurationMicros,
    ];
  }

  public static getAlgebraicType(): AlgebraicType {
    return AlgebraicType.createProductType([
      new ProductTypeElement(
        "messageId",
        AlgebraicType.createArrayType(
          AlgebraicType.createPrimitiveType(BuiltinType.Type.U8)
        )
      ),
      new ProductTypeElement(
        "error",
        AlgebraicType.createSumType([
          new SumTypeVariant(
            "some",
            AlgebraicType.createPrimitiveType(BuiltinType.Type.String)
          ),
          new SumTypeVariant("none", AlgebraicType.createProductType([])),
        ])
      ),
      new ProductTypeElement(
        "tables",
        AlgebraicType.createArrayType(OneOffTable.getAlgebraicType())
      ),
      new ProductTypeElement(
        "totalHostExecutionDurationMicros",
        AlgebraicType.createPrimitiveType(BuiltinType.Type.U64)
      ),
    ]);
  }

  public static fromValue(value: AlgebraicValue): OneOffQueryResponse {
    let productValue = value.asProductValue();
    let __message_id = productValue.elements[0].asBytes();
    let __error =
      productValue.elements[1].asSumValue().tag == 1
        ? null
        : productValue.elements[1].asSumValue().value.asString();
    let __tables = productValue.elements[2]
      .asArray()
      .map((el) => OneOffTable.fromValue(el)) as OneOffTable[];
    let __total_host_execution_duration_micros =
      productValue.elements[3].asBigInt();
    return new this(
      __message_id,
      __error,
      __tables,
      __total_host_execution_duration_micros
    );
  }
}

export default OneOffQueryResponse;
