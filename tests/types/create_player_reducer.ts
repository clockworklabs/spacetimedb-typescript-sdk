// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN RUST INSTEAD.

// @ts-ignore
import {
  __SPACETIMEDB__,
  AlgebraicType,
  ProductType,
  BuiltinType,
  ProductTypeElement,
  IDatabaseTable,
  AlgebraicValue,
} from "../../src/index";
// @ts-ignore
import { Point } from "./point";

export class CreatePlayerReducer {
  public static call(name: string, location: Point) {
    if (__SPACETIMEDB__.spacetimeDBClient) {
      __SPACETIMEDB__.spacetimeDBClient.call("create_player", [
        name,
        Point.serialize(location),
      ]);
    }
  }

  public static deserializeArgs(rawArgs: any[]): any[] {
    let nameType = AlgebraicType.createPrimitiveType(BuiltinType.Type.String);
    let nameValue = AlgebraicValue.deserialize(nameType, rawArgs[0]);
    let name = nameValue.asString();
    let locationType = Point.getAlgebraicType();
    let locationValue = AlgebraicValue.deserialize(locationType, rawArgs[1]);
    let location = Point.fromValue(locationValue);
    return [name, location];
  }

  public static on(
    callback: (status: string, identity: string, reducerArgs: any[]) => void
  ) {
    if (__SPACETIMEDB__.spacetimeDBClient) {
      __SPACETIMEDB__.spacetimeDBClient.on("reducer:CreatePlayer", callback);
    }
  }
}

__SPACETIMEDB__.reducers.set("CreatePlayer", CreatePlayerReducer);
if (__SPACETIMEDB__.spacetimeDBClient) {
  __SPACETIMEDB__.spacetimeDBClient.registerReducer(
    "CreatePlayer",
    CreatePlayerReducer
  );
}

export default CreatePlayerReducer;
